# Ona Commands for ChurchTools Extension Development

This file contains pre-defined commands for common development tasks. Copy and paste these commands when working with AI assistants.

## Development Commands

### Start Development Server
```bash
npm run dev
```
Use `exec_preview` with port 5173 to start the development server and get a preview URL.

### Build and Deploy
```bash
npm run build && npm run deploy
```
Builds the extension and packages it for ChurchTools deployment.

### Code Formatting
```bash
npm run prettier:write
```
Formats all code according to project standards.

## Git Workflow Commands

### Create Feature Branch
```bash
git checkout -b feature/your-feature-name
```

### Commit Changes (Template)
```bash
git add .
git commit -m "feat: add new feature description

- Detailed change 1
- Detailed change 2

Co-authored-by: Ona <no-reply@ona.com>"
```

### Push and Create PR
```bash
git push -u origin feature/your-feature-name
gh pr create --title "feat: your feature title" --body "Description of changes"
```

## Component Generation Commands

### Create New Module
```bash
mkdir -p src/components/your-module
touch src/components/your-module/YourModuleCard.vue
touch src/components/your-module/YourModuleAdmin.vue
```

### Create Composable
```bash
touch src/composables/useYourFeature.ts
```

## Testing Commands

### Manual Testing Checklist
```bash
# 1. Start dev server
npm run dev

# 2. Test in browser
# - Check console for errors
# - Test responsive design
# - Verify ChurchTools integration

# 3. Build test
npm run build

# 4. Deploy test
npm run deploy
```

## Documentation Commands

### Generate Development Session Documentation
```bash
# Quick session documentation with defaults
node scripts/document-session.js

# Interactive mode with detailed prompts
node scripts/document-session.js --interactive

# Create template with placeholders for manual editing
node scripts/document-session.js --template-only

# Show help and usage information
node scripts/document-session.js --help
```

### Session Documentation Templates
Different templates for different types of sessions:

#### Feature Development Session
```bash
# Use feature-development template for new feature work
cp .ona-session-templates/feature-development.md docs/DEVELOPMENT_SESSION_$(date +%Y-%m-%d).md
```

#### Bugfix Session
```bash
# Use bugfix template for bug resolution work
cp .ona-session-templates/bugfix-session.md docs/DEVELOPMENT_SESSION_$(date +%Y-%m-%d).md
```

#### Refactoring Session
```bash
# Use refactoring template for code improvement work
cp .ona-session-templates/refactoring-session.md docs/DEVELOPMENT_SESSION_$(date +%Y-%m-%d).md
```

### AI-Assisted Documentation Prompts

#### Generate Component Documentation
Use this prompt with AI:
```
Create documentation for the [ComponentName] component including:
- Purpose and usage
- Props interface
- Events emitted
- Example usage
- Integration notes
```

#### Update API Documentation
Use this prompt with AI:
```
Update the API documentation in .ona-context.md with new patterns discovered during development of [feature name]. Include:
- New API endpoints used
- Common pitfalls encountered
- Best practices learned
```

#### Session Documentation with AI
Use this prompt with AI:
```
Help me document this development session using the template structure. 
I worked on [describe work done] and encountered [describe challenges].
Please help fill out the session documentation following the established patterns.

Key accomplishments:
- [accomplishment 1]
- [accomplishment 2]

Technical challenges:
- [challenge 1]: [solution 1]
- [challenge 2]: [solution 2]

Lessons learned:
- [lesson 1]
- [lesson 2]
```

#### Generate Lessons Learned Section
Use this prompt with AI:
```
Based on this development session, help me create a comprehensive "Lessons Learned" section including:
- Technical insights and discoveries
- Process improvements identified
- Best practices reinforced or discovered
- Anti-patterns avoided
- Future considerations

Session context: [describe what was worked on]
Challenges faced: [describe main challenges]
Solutions implemented: [describe solutions]
```

## Debugging Commands

### Check ChurchTools API
```bash
# In browser console:
console.log(window.churchtoolsClient)
```

### Debug Component State
```bash
# Add to component for debugging:
console.log('Component state:', { ...state })
```

### Inspect Build Output
```bash
ls -la dist/
cat dist/index.html
```

## Environment Setup Commands

### Install Dependencies
```bash
npm install
```

### Update Dependencies
```bash
npm update
npm audit fix
```

### Clean Install
```bash
rm -rf node_modules package-lock.json
npm install
```

## ChurchTools Integration Commands

### Test API Connection
```javascript
// Browser console test
churchtoolsClient.get('/whoami').then(console.log).catch(console.error)
```

### Check Extension Context
```javascript
// Browser console test
console.log('Extension context:', {
  url: window.location.href,
  parent: window.parent !== window,
  churchtoolsClient: !!window.churchtoolsClient
})
```

## AI Assistant Prompts

### Session Documentation Workflow
```
I'm starting a development session. Help me:
1. Set up the session documentation structure
2. Track accomplishments and challenges as we work
3. Document lessons learned throughout the session
4. Create a comprehensive session summary at the end

Use the session documentation templates and follow the established patterns from ChurchTools extension development.
```

### Real-time Session Tracking
```
I just completed [specific task/feature]. Help me document this accomplishment:
- What was implemented: [description]
- Technical approach: [approach used]
- Challenges encountered: [challenges]
- Solutions applied: [solutions]
- Code changes: [key changes]

Add this to the ongoing session documentation following the template structure.
```

### Code Review Request
```
Please review this code for:
- ChurchTools API usage patterns
- Vue 3 Composition API best practices
- TypeScript type safety
- Error handling
- Performance considerations
- Accessibility compliance
```

### Component Creation Request
```
Create a new Vue 3 component for [feature description] that:
- Extends BaseCard for consistency
- Uses TypeScript with proper types
- Follows the existing code patterns
- Includes error handling
- Is responsive and accessible
- Integrates with the ChurchTools API
```

### Bug Fix Request
```
I'm encountering this error: [error message]

Context:
- Component: [component name]
- Action: [what user was doing]
- Expected: [expected behavior]
- Actual: [actual behavior]

Please help debug and fix this issue following ChurchTools extension best practices.
```

### Documentation Request
```
Create comprehensive documentation for [feature/component] including:
- Overview and purpose
- Installation/setup steps
- Usage examples
- API reference
- Common issues and solutions
- Integration guidelines
```

### Session Retrospective
```
Help me create a comprehensive retrospective for this development session:

Session Overview:
- Duration: [time spent]
- Main focus: [primary objectives]
- Branch: [git branch used]

Accomplishments:
- [list major accomplishments]

Challenges:
- [list technical challenges and solutions]

Code Quality:
- [improvements made]
- [technical debt addressed]

Performance:
- [optimizations implemented]
- [metrics improved]

Generate a structured session document following the established template patterns with detailed technical insights and lessons learned.
```

## Performance Optimization Commands

### Bundle Analysis
```bash
npm run build
ls -lh dist/assets/
```

### Memory Usage Check
```javascript
// Browser console
console.log('Memory usage:', performance.memory)
```

## Security Commands

### Audit Dependencies
```bash
npm audit
npm audit fix
```

### Check for Secrets
```bash
grep -r "password\|secret\|key\|token" src/ --exclude-dir=node_modules
```

## Deployment Commands

### Pre-deployment Checklist
```bash
# 1. Run tests
npm run prettier:check

# 2. Build
npm run build

# 3. Check build output
ls -la dist/

# 4. Package
npm run deploy

# 5. Verify package
ls -la *.zip
```

### Upload to ChurchTools
```
Manual steps:
1. Go to ChurchTools Admin > Extensions
2. Upload the generated .zip file
3. Configure extension settings
4. Test in production environment
```

---

**Usage:** Copy the relevant commands and prompts when working with AI assistants to ensure consistent development practices and efficient workflow.